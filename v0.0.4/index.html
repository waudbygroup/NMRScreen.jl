<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · NMRScreen.jl</title><meta name="title" content="Home · NMRScreen.jl"/><meta property="og:title" content="Home · NMRScreen.jl"/><meta property="twitter:title" content="Home · NMRScreen.jl"/><meta name="description" content="Documentation for NMRScreen.jl."/><meta property="og:description" content="Documentation for NMRScreen.jl."/><meta property="twitter:description" content="Documentation for NMRScreen.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>NMRScreen.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Quick-Start"><span>Quick Start</span></a></li><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Input-File-Structure"><span>Input File Structure</span></a></li><li><a class="tocitem" href="#Interactive-Analysis"><span>Interactive Analysis</span></a></li><li><a class="tocitem" href="#Output-Files"><span>Output Files</span></a></li><li><a class="tocitem" href="#Peak-Naming-Convention"><span>Peak Naming Convention</span></a></li><li><a class="tocitem" href="#Data-Requirements"><span>Data Requirements</span></a></li><li><a class="tocitem" href="#Tips-for-Success"><span>Tips for Success</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/waudbygroup/NMRScreen.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/waudbygroup/NMRScreen.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="NMRScreen.jl"><a class="docs-heading-anchor" href="#NMRScreen.jl">NMRScreen.jl</a><a id="NMRScreen.jl-1"></a><a class="docs-heading-anchor-permalink" href="#NMRScreen.jl" title="Permalink"></a></h1><p>NMRScreen.jl is a Julia package for analysis of NMR fragment screening data, currently specialising in 19F R₂ relaxation measurements.</p><p><img src="assets/analysis-screenshot.png" alt="Screenshot of NMRScreen.jl analysis window"/></p><ul><li><a href="#NMRScreen.jl">NMRScreen.jl</a></li><li class="no-marker"><ul><li><a href="#Quick-Start">Quick Start</a></li><li><a href="#Overview">Overview</a></li><li><a href="#Installation">Installation</a></li><li class="no-marker"><ul><li><a href="#1.-Install-Julia">1. Install Julia</a></li><li><a href="#2.-Install-NMRScreen.jl">2. Install NMRScreen.jl</a></li><li><a href="#3.-Test-the-Installation">3. Test the Installation</a></li></ul></li><li><a href="#Input-File-Structure">Input File Structure</a></li><li class="no-marker"><ul><li><a href="#1.-Experiment-Configuration-(experiment.toml)">1. Experiment Configuration (experiment.toml)</a></li><li><a href="#2.-Library-Definition-(library.toml)">2. Library Definition (library.toml)</a></li><li><a href="#3.-Cocktail-Definitions-(cocktails.csv)">3. Cocktail Definitions (cocktails.csv)</a></li><li><a href="#4.-Fragment-Definitions-(fragments.csv)">4. Fragment Definitions (fragments.csv)</a></li></ul></li><li><a href="#Interactive-Analysis">Interactive Analysis</a></li><li class="no-marker"><ul><li><a href="#Peak-Registration-GUI">Peak Registration GUI</a></li><li><a href="#Analysis-GUI">Analysis GUI</a></li></ul></li><li><a href="#Output-Files">Output Files</a></li><li><a href="#Peak-Naming-Convention">Peak Naming Convention</a></li><li><a href="#Data-Requirements">Data Requirements</a></li><li><a href="#Tips-for-Success">Tips for Success</a></li></ul></li></ul><p>!!! note Development Status     NMRScreen.jl is in early development and actively evolving. While the core functionality is stable, you may encounter changes in the API, data formats, and features as we continue to improve the package. We&#39;re currently focused on R₂-based screening but plan to expand to other NMR screening approaches in future releases.</p><pre><code class="nohighlight hljs">We warmly welcome feedback, bug reports, and contributions! If you encounter issues, have feature suggestions, or would like to contribute to development, please visit our GitHub repository at [https://github.com/waudbygroup/NMRScreen.jl]. Even if you&#39;re new to Julia, we&#39;re happy to help you get started with contributing.</code></pre><h2 id="Quick-Start"><a class="docs-heading-anchor" href="#Quick-Start">Quick Start</a><a id="Quick-Start-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-Start" title="Permalink"></a></h2><p>Using Julia 1.11 or greater:</p><pre><code class="language-julia hljs">using Pkg
Pkg.add(&quot;NMRScreen&quot;)
using NMRScreen
screen(&quot;experiment.toml&quot;)</code></pre><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>NMRScreen.jl provides a streamlined workflow for processing and analysing NMR fragment screening data. The analysis proceeds in two stages:</p><ol><li>Peak Registration: Align observed peaks with the fragment library</li><li>Analysis: Quantify binding through changes in relaxation rates (ΔR₂) or relative intensities (I/I0)</li></ol><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><h3 id="1.-Install-Julia"><a class="docs-heading-anchor" href="#1.-Install-Julia">1. Install Julia</a><a id="1.-Install-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Install-Julia" title="Permalink"></a></h3><p>If you&#39;re new to Julia, follow these steps to get started:</p><ol><li><p>Download Julia from the official website: https://julialang.org/downloads/</p><ul><li>Choose the version marked &#39;Current stable release&#39;</li><li>Select the correct download for your operating system (Windows, macOS, or Linux)</li></ul></li><li><p>Install Julia:</p><ul><li>Windows: Run the downloaded installer</li><li>macOS: Drag the Julia app to your Applications folder</li><li>Linux: Extract the downloaded file and create a symbolic link to julia in your PATH</li></ul></li><li><p>Verify the installation:</p><ul><li>Open a terminal (Command Prompt on Windows)</li><li>Type <code>julia</code> and press Enter</li><li>You should see the Julia REPL (command prompt) with a version number</li></ul></li></ol><h3 id="2.-Install-NMRScreen.jl"><a class="docs-heading-anchor" href="#2.-Install-NMRScreen.jl">2. Install NMRScreen.jl</a><a id="2.-Install-NMRScreen.jl-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Install-NMRScreen.jl" title="Permalink"></a></h3><ol><li><p>Start Julia and enter the package manager by typing <code>]</code> (right square bracket)</p><pre><code class="nohighlight hljs">julia&gt; ]
(@v1.11) pkg&gt;</code></pre></li><li><p>Install NMRScreen.jl:</p><pre><code class="nohighlight hljs">(@v1.11) pkg&gt; add NMRScreen</code></pre></li><li><p>Exit the package manager by pressing Backspace or Delete when the line is empty</p></li></ol><h3 id="3.-Test-the-Installation"><a class="docs-heading-anchor" href="#3.-Test-the-Installation">3. Test the Installation</a><a id="3.-Test-the-Installation-1"></a><a class="docs-heading-anchor-permalink" href="#3.-Test-the-Installation" title="Permalink"></a></h3><ol><li><p>Load the package:</p><pre><code class="language-julia hljs">julia&gt; using NMRScreen</code></pre></li><li><p>If there are no error messages, the installation was successful.</p></li></ol><h2 id="Input-File-Structure"><a class="docs-heading-anchor" href="#Input-File-Structure">Input File Structure</a><a id="Input-File-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Input-File-Structure" title="Permalink"></a></h2><p>The experiment is configured through a hierarchy of files that define your screening setup, fragment library, and experimental parameters. Below is a detailed explanation of each required file:</p><h3 id="1.-Experiment-Configuration-(experiment.toml)"><a class="docs-heading-anchor" href="#1.-Experiment-Configuration-(experiment.toml)">1. Experiment Configuration (experiment.toml)</a><a id="1.-Experiment-Configuration-(experiment.toml)-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Experiment-Configuration-(experiment.toml)" title="Permalink"></a></h3><p>The top-level configuration file defines all aspects of your screening experiment. This TOML file consists of several sections:</p><pre><code class="language-toml hljs">[setup]
name = &quot;BSA Fragment Screen Test&quot;        # Descriptive name for the screen
date = &quot;2024-11-11&quot;                      # Date of data collection
operator = &quot;Chris Waudby&quot;                # Person conducting the screen
spectrometer = &quot;Obi-Wan&quot;                 # Spectrometer name/ID
temperature = 298.0                      # Temperature in Kelvin
tube_diameter = 5                        # NMR tube diameter in mm

[files]
fragment_library = &quot;library.toml&quot;        # Path to library definition file
reference_directory = &quot;BSA_test&quot;         # Directory containing reference spectra
experiment_directory = &quot;BSA_test&quot;        # Directory containing bound spectra
output_directory = &quot;out&quot;                 # Where to save results

[protein]
name = &quot;BSA&quot;                             # Target protein name
concentration = 0.2                      # Protein concentration
concentration_unit = &quot;mg/mL&quot;             # Units for concentration
buffer = &quot;50mM Tris pH 7.4, 100mM NaCl&quot; # Buffer composition

# Each cocktail requires a separate [[cocktails]] section
[[cocktails]]
id = &quot;C1&quot;                               # Must match ID in library
reference = &quot;1&quot;                         # Bruker experiment number for fragment-only control
experiment = &quot;101&quot;                      # Bruker experiment number with protein present

[[cocktails]]
id = &quot;C2&quot;
reference = &quot;2&quot;
experiment = &quot;102&quot;</code></pre><p>The <code>reference</code> and <code>experiment</code> numbers in each cocktail section correspond to Bruker experiment numbers in your dataset. These should be pseudo-2D R₂ relaxation measurements.</p><h3 id="2.-Library-Definition-(library.toml)"><a class="docs-heading-anchor" href="#2.-Library-Definition-(library.toml)">2. Library Definition (library.toml)</a><a id="2.-Library-Definition-(library.toml)-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Library-Definition-(library.toml)" title="Permalink"></a></h3><p>The library definition file connects your fragment library information with the cocktail compositions:</p><pre><code class="language-toml hljs">name = &quot;Fluorine Fragment Library Example&quot;  # Descriptive name for the library
cocktails = &quot;cocktails.csv&quot;                 # Path to cocktail definitions
fragments = &quot;fragments.csv&quot;                 # Path to fragment information</code></pre><p>This file serves as a central reference point for your fragment library, allowing you to maintain multiple libraries or library versions while keeping the cocktail and fragment information in easily editable CSV format.</p><h3 id="3.-Cocktail-Definitions-(cocktails.csv)"><a class="docs-heading-anchor" href="#3.-Cocktail-Definitions-(cocktails.csv)">3. Cocktail Definitions (cocktails.csv)</a><a id="3.-Cocktail-Definitions-(cocktails.csv)-1"></a><a class="docs-heading-anchor-permalink" href="#3.-Cocktail-Definitions-(cocktails.csv)" title="Permalink"></a></h3><p>The cocktails file defines the composition of each fragment mixture. This is a comma-separated values (CSV) file with three columns:</p><pre><code class="language-csv hljs">id,name,fragments
C1,Cocktail 1,BF-0702-05-F11,FS-2142-01-C04,PS-6442-06-H02,...
C2,Cocktail 2,DS-7111-05-C02,SS-4432-05-C11,TS-02206-05-H12,...</code></pre><ul><li><code>id</code>: Unique identifier that matches the cocktail IDs in experiment.toml</li><li><code>name</code>: Human-readable name for the cocktail</li><li><code>fragments</code>: Comma-separated list of fragment IDs present in this cocktail</li></ul><p>Each fragment ID must correspond to an entry in fragments.csv. The order of fragments is not important, but accuracy is crucial - every fragment ID must be exactly as it appears in your fragments.csv file.</p><h3 id="4.-Fragment-Definitions-(fragments.csv)"><a class="docs-heading-anchor" href="#4.-Fragment-Definitions-(fragments.csv)">4. Fragment Definitions (fragments.csv)</a><a id="4.-Fragment-Definitions-(fragments.csv)-1"></a><a class="docs-heading-anchor-permalink" href="#4.-Fragment-Definitions-(fragments.csv)" title="Permalink"></a></h3><p>The fragments file contains detailed information about each fragment in your library. This CSV file has the following columns:</p><pre><code class="language-csv hljs">id,smiles,concentration,shifts/heights
AS-8515-02-E06,COc1ccc2c(N)nn(C)c2c1F,128.20,-160.8800661,1
NC-0761-06-D05,FC2(=CN1(C(=NC(=C1)C(=O)OCC)C=C2)),119.40,-138.0534395,1
PS-8226-02-B10,ClC=1(C2(=C(N=CC=1)C(F)=CC(=C2)F)),88.28,-107.4864436,1,-107.5015476,1,-119.8637491,1,-119.8788532,1</code></pre><ul><li><code>id</code>: Unique identifier for the fragment (must match IDs used in cocktails.csv)</li><li><code>smiles</code>: Chemical structure in SMILES format</li><li><code>concentration</code>: Fragment concentration in μM</li><li><code>shifts/heights</code>: Pairs of numbers representing chemical shift (in ppm) and relative height for each peak</li></ul><p>For fragments with multiple fluorine peaks (like PS-8226-02-B10 above), the shifts/heights pairs are repeated for each peak. This allows accurate peak matching and quantification for fragments with multiple fluorine environments.</p><p>Important notes:</p><ul><li>Chemical shifts should be referenced consistently with your experimental data</li><li>Heights should be set to 1 unless you have specific reason to expect different relative intensities - this is not used at present</li><li>Multiple peaks for a single fragment will be automatically labelled with suffixes (a, b, c, etc.) in the analysis output</li></ul><h2 id="Interactive-Analysis"><a class="docs-heading-anchor" href="#Interactive-Analysis">Interactive Analysis</a><a id="Interactive-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Interactive-Analysis" title="Permalink"></a></h2><h3 id="Peak-Registration-GUI"><a class="docs-heading-anchor" href="#Peak-Registration-GUI">Peak Registration GUI</a><a id="Peak-Registration-GUI-1"></a><a class="docs-heading-anchor-permalink" href="#Peak-Registration-GUI" title="Permalink"></a></h3><p>The first stage aligns observed peaks with the fragment library:</p><p><img src="assets/registration-screenshot.png" alt="Screenshot of NMRScreen.jl registration window"/></p><p>Keyboard shortcuts:</p><ul><li>←/→: Navigate between peaks</li><li>SHIFT + ←/→: Navigate between peaks within fragment</li><li>↑/↓: Navigate between cocktails</li><li>&#39;[&#39; / &#39;]&#39;: Nudge reference peak (SHIFT for next maximum)</li><li>&#39;,&#39; / &#39;.&#39;: Nudge bound peak (SHIFT for next maximum)</li><li>Control-click: Reset zoom</li><li>Right-drag: Pan spectrum</li></ul><h3 id="Analysis-GUI"><a class="docs-heading-anchor" href="#Analysis-GUI">Analysis GUI</a><a id="Analysis-GUI-1"></a><a class="docs-heading-anchor-permalink" href="#Analysis-GUI" title="Permalink"></a></h3><p>The second stage quantifies binding through ΔR₂ analysis:</p><p><img src="assets/analysis-screenshot.png" alt="Screenshot of NMRScreen.jl analysis window"/></p><p>Keyboard shortcuts:</p><ul><li>←/→: Navigate between peaks</li><li>SHIFT + ←/→: Navigate between peaks within fragment</li><li>↑/↓: Navigate between cocktails</li><li>Mouse wheel: Adjust heatmap scale / zoom</li><li>Click heatmap: Select peak</li><li>Control-click: Reset zoom</li><li>Right-drag: Pan spectrum</li></ul><h2 id="Output-Files"><a class="docs-heading-anchor" href="#Output-Files">Output Files</a><a id="Output-Files-1"></a><a class="docs-heading-anchor-permalink" href="#Output-Files" title="Permalink"></a></h2><p>Results are saved in the specified output directory:</p><ol><li><strong>top_fragments.pdf</strong>: Fragments ranked by ΔR₂ with distribution histogram</li></ol><p><img src="assets/top_fragments.png" alt="Top fragments"/></p><ol><li><strong>Heatmaps</strong>: Visualisations of:<ul><li>ΔR₂ vs cocktail and peak number</li><li>Chemical shift perturbations (free/bound)</li><li>Intensity ratios (I/I₀)</li><li>Relaxation fitting quality (reduced χ²)</li><li>Reference R₂ (for aggregation detection)</li></ul></li></ol><p><img src="assets/DeltaR2.png" alt="ΔR2 heatmap"/></p><ol><li><strong>Result cards</strong>: PDF summary for each peak</li></ol><p><img src="assets/1F-380S-01-C01a.png" alt="Example result card"/></p><ol><li><strong>results.csv</strong>: Complete numerical results including:<ul><li>Fragment and cocktail identifiers</li><li>Chemical shifts (library, reference, bound)</li><li>Intensity ratios with errors</li><li>Chemical shift perturbations</li><li>R₂ values (reference, bound) with errors</li><li>ΔR₂ with errors</li><li>Fitting quality metrics</li></ul></li></ol><h2 id="Peak-Naming-Convention"><a class="docs-heading-anchor" href="#Peak-Naming-Convention">Peak Naming Convention</a><a id="Peak-Naming-Convention-1"></a><a class="docs-heading-anchor-permalink" href="#Peak-Naming-Convention" title="Permalink"></a></h2><p>Multiple peaks from a single fragment are distinguished by letter suffixes (e.g., PS-8104-06-D02a, PS-8104-06-D02b).</p><h2 id="Data-Requirements"><a class="docs-heading-anchor" href="#Data-Requirements">Data Requirements</a><a id="Data-Requirements-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Requirements" title="Permalink"></a></h2><ol><li>Bruker format pseudo-2D R₂ relaxation data</li><li>Reference (fragment-only) and bound (fragment + protein) experiments</li><li>Fragment library definition with accurate chemical shifts</li></ol><h2 id="Tips-for-Success"><a class="docs-heading-anchor" href="#Tips-for-Success">Tips for Success</a><a id="Tips-for-Success-1"></a><a class="docs-heading-anchor-permalink" href="#Tips-for-Success" title="Permalink"></a></h2><ol><li>Ensure accurate chemical shift referencing between experiments</li><li>Check for compound aggregation through reference R₂ values</li><li>Consider intensity changes alongside ΔR₂</li><li>Validate fits using reduced χ² and visual inspection</li><li>Be cautious of overlapped peaks in cocktail spectra</li></ol></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Tuesday 11 February 2025 18:31">Tuesday 11 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
